<div class="panel panel-default">
  <div class="panel-heading">
    <div class="row col-md-12">
      <h2>
	Du {{from_date | amDateFormat:'Do MMMM YYYY'}} au {{to_date | amDateFormat:'Do MMMM YYYY'}}

	<div class="pull-right">
	  <button class="btn btn-default" data-ng-click="reset_offset()">Aujourd'hui</button>
	  <div class="btn-group">
	    <button class="btn btn-default" data-ng-click="incr_offset()"><span class="glyphicon glyphicon-chevron-left"></span></button>
	    <button class="btn btn-default" data-ng-click="decr_offset()"><span class="glyphicon glyphicon-chevron-right"></span></button>
	  </div>
	</div>
      </h2>
    </div>

    <div class="row col-md-12">
      <select class="pull-left"
	      data-ng-options="id as matiere.libelle_long for (id,matiere) in matieres"
	      data-ng-model="id_matiere_selected"
	      data-ng-change="filter_data( id_matiere_selected )">
	<option value="" selected>Toutes les matières</option>
      </select>

      <div class="pull-right">
	<label><checkbox data-ng-model="affiche_faits"></checkbox> Afficher les devoirs déjà fait</label>
	<label><checkbox data-ng-model="tri_ascendant"></checkbox>  Tri ascendant</label>
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="panel-body">
    <ul class="list-group todo-list" data-ng-if="devoirs">
      <li data-ng-repeat="devoir in devoirs | orderBy:'date_due':tri_ascendant"
	  data-ng-if="devoir.date_fait == null || affiche_faits"
	  style="list-style:none"
	  class="devoir list-group-item"
	  data-ng-class="{ 'type1': devoir.type_devoir_id == 1, 'type2': devoir.type_devoir_id == 2, 'type3': devoir.type_devoir_id == 3, 'type4': devoir.type_devoir_id == 4, 'type5': devoir.type_devoir_id == 5, 'type6': devoir.type_devoir_id == 6, 'fait': devoir.fait, 'a-faire': !devoir.fait }" >

	<div class="row alret alert-default title">
	  <div class="pull-left date">{{devoir.date_due | amDateFormat: 'dddd d MMMM'}}</div>
	  <span class="matiere"> {{devoir.matiere.libelle_long}}</span>

	  <div class="pull-right detail">
	    <a class="btn btn-default" data-ui-sref="eleve.devoirs.popup({ titre: devoir.matiere.libelle_long, cours_id: devoir.cours.id, devoirs_ids: '[' + devoir.id + ']' })">Détail</a>
	  </div>

	  <div class="pull-right todo">
	    <div data-ng-switcher
		 data-ng-if="!(devoir.type_devoir_id == 1) && current_user.profil_actif.type === 'ELV'"
		 data-ng-model="devoir.fait"
		 data-ng-change="fait( devoir )" ></div>
	  </div>
	</div>

	<div class="row">
	  <div class="col-md-5 alert alert-default">
	    <p>Séquence pédagogique du {{devoir.cours.date_cours | amDateFormat:'dddd d MMMM'}}</p>
	    <div class="alert alert-default" data-ng-bind-html="devoir.cours.contenu"></div>
	  </div>

	  <div class="col-md-7 alert alert-default">
	    <p>{{devoir.type_devoir.description}}</p>
	    <!-- <p data-ng-if="devoir.temps_estime">{{devoir.temps_estime * 5}} minutes</p> -->
	    <div class="alert alert-default" data-ng-bind-html="devoir.contenu"></div>

	    <div class="row col-md-12 ressources">
	      <div class="attached-document" data-ng-repeat="ressource in devoir.ressources">
		<a target="_blank" href="{{ressource.url}}">{{ressource.name}}</a>
	      </div>
	    </div>
	  </div>
	</div>

	<div class="clearfix"></div>
      </li>
    </ul>
  </div>
</div>
