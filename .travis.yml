language: ruby
rvm:
  - "2.1.3"

before_install:
  - gem update --system
  - gem --version
  - gem install rspec

before_script:
  - cp constants.rb.sample constants.rb
  - cp database.rb.sample database.rb
  - cp options.rb.sample options.rb
  - cp thin.yml.sample thin.yml
  - mysql -e 'create database CahierDeTextes;'
  - bundle exec rake db:migrations

script: "bundle exec rspec spec/api/ spec/lib/"

gemfile:
  - Gemfile

services:
  - mysql

branches:
  only:
    # - master
    - develop

notifications:
  email:
    recepients:
      - glemoine@erasme.org
  # slack:
  #   rooms:
  #     - erasme:IWf0zN63Kuw5HgeJVwhnhxAC#laclassebeta
